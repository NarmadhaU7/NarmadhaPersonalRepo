import React from "react";
import axios from "axios";
import NewsData from "./NewsData.js";
import "./styles.css";

class NewsPortal extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      category: "all",
      newsDataList: [],
      newsDataComponent: []
    };
    this.onCategorySelection = this.onCategorySelection.bind(this);
  }

  componentDidMount() {
    console.log("component did mount is called");
    console.log(this.state.category);
    this.getNewsData(this.state.category);
  }
A
  getNewsData(inParam) {
    console.log("getNewsData");
    console.log(inParam);

    axios
      .get("https://inshortsapi.vercel.app/news", {
        params: { category: inParam }
      })
      .then((res) => {
        if (res.data.success === true) {
          console.log(res.data);
          const newsDataArray = res.data.data;
          this.setState({ newsDataList: newsDataArray });
        } else {
          console.log("Display Error Panel");
        }
      });
  }

  onCategorySelection(event) {
    console.log("on changing category");
    console.log(event.target.value);

    this.state.newsDataList.pop();
    this.state.newsDataComponent.pop();
    this.getNewsData(event.target.value);
  }

  render() {
    for (var i = 0; i < this.state.newsDataList.length; i++) {
      console.log("for loop called");
      console.log(this.state.newsDataList);
      console.log(this.state.newsDataComponent);

      this.state.newsDataComponent.push(
        <NewsData input={this.state.newsDataList[i]} />
      );
    }

    return (
      <div className="TaskMainHolder">
        <div className="TaskHeaderPanel">
          <h2 className="text-center">OnePS News Portal</h2>
        </div>
        <div className="row NewsCategorySearchPanel">
          <div className="col-4 offset-2">
            <label htmlFor="newscategory">Category</label>
          </div>
          <div className="col-3">
            <select
              className="form-control"
              id="category"
              onChange={this.onCategorySelection}
            >
              <option value="all">All</option>
              <option value="science">Science</option>
            </select>
          </div>
        </div>
        <div className="NewsListDisplayHolder">
          {this.state.newsDataComponent}
        </div>
      </div>
    );
  }
}











import React from "react";
import "./styles.css";

class NewsData extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      newsDataInfo: this.props.input
    };
  }

  componentDidMount() {
    console.log("NewsData component did mount");
  }

  render() {
    return (
      <div className="row NewsListDisplayArea">
        <div className="col-3 NewsThumnailArea">
          <img
            src={this.state.newsDataInfo.imageUrl}
            alt="img"
            className="NewsThumbnailArea"
          />
        </div>
        <div className="col NewsOtherInfoArea">
          <div className="row NewsTitleArea">
            <div className="NewsTitlePanel">
              {this.state.newsDataInfo.title}
            </div>
          </div>
          <div className="row">
            <b>Author: </b>
            {this.state.newsDataInfo.author}
          </div>
          <div className="row">
            <b>Content: </b>
            {this.state.newsDataInfo.content}
          </div>
          <div className="row">
            <b>Date:</b> {this.state.newsDataInfo.date} <b>Time:</b>
            {this.state.newsDataInfo.time}
          </div>
          <div className="NewsReadMoreArea"></div>
        </div>
      </div>
    );
  }
}

export default NewsData;



import React from "react";
import ReactDOM from "react-dom";

import NewsPortal from "./NewsPortal.js";

function OnePSTaskApp() {
  return <NewsPortal />;
}

ReactDOM.render(<OnePSTaskApp />, document.getElementById("root"));



.NewsListDisplayArea {
  margin: 2rem;
}

.NewsCategorySearchPanel {
  margin: 2rem;
}

.NewsThumbnailArea {
  width: 15rem;
}

.NewsTitlePanel {
  font-weight: bold;
}







export default NewsPortal;

          


